# coding:utf-8
from uiautomator import Device
from Repo import *
import os, time, datetime, random
import json
from zservice import ZDevice


class ImpContact:
    def __init__(self):
        self.repo = Repo()

    def GetUnique(self):
        nowTime = datetime.datetime.now().strftime("%Y%m%d%H%M%S");  # 生成当前时间
        randomNum = random.randint(0, 1000);  # 生成的随机整数n，其中0<=n<=100
        if randomNum <= 10:
            randomNum = str(00) + str(randomNum);
        uniqueNum = str(nowTime) + str(randomNum);
        return uniqueNum


    def action(self, d,z, args):
        base_dir = os.path.abspath(os.path.join(os.path.dirname(__file__),os.path.pardir, "tmp"))
        if not os.path.isdir(base_dir):
            os.mkdir(base_dir)
        filename = os.path.join(base_dir, "%s.txt"%(self.GetUnique()) )

        number_count = args['number_count']
        cate_id = args["repo_cate_id"]
        while True:
            numbers = self.repo.GetNumber(cate_id, 0, number_count)
            if len(numbers)> 0:
                break;
            d.server.adb.cmd("shell", "am broadcast -a com.zunyun.zime.toast --es msg \"电话号码%s号仓库为空，等待中\""%cate_id).communicate()
            time.sleep(30)

        if numbers:
            file_object = open(filename, 'w')
            lines = ""
            for number in numbers:
                if number["name"] is None:
                    name = number["number"]
                lines = "%s%s----%s\r" %(lines, name, number["number"])

            file_object.writelines(lines)
            file_object.close()
            d.server.adb.cmd("shell", "am", "start", "-a", "zime.clear.contacts").communicate()
            d.server.adb.cmd("push", filename, "/data/local/tmp/contacts.txt").communicate()
            d.server.adb.cmd("shell", "am", "start", "-n", "com.zunyun.zime/.ImportActivity").communicate()
            d.server.adb.cmd("shell", "am broadcast -a com.zunyun.import.contact --es file \"file:///data/local/tmp/contacts.txt\"").communicate()
            os.remove(filename)

            out = d.server.adb.cmd("shell",
                               "dumpsys activity top  | grep ACTIVITY").communicate()[0].decode('utf-8')
            while out.find("com.zunyun.zime/.ImportActivity") > -1:
                out = d.server.adb.cmd("shell",
                                   "dumpsys activity top  | grep ACTIVITY").communicate()[0].decode('utf-8')
                time.sleep(5)


        if (args["time_delay"]):
            time.sleep(int(args["time_delay"]))

def getPluginClass():
    return ImpContact

if __name__ == "__main__":
    # global args
    clazz = getPluginClass()
    o = clazz()

    d = Device("HT4A4SK00901")
    z = ZDevice("HT4A4SK00901")
    d.server.adb.cmd("shell", "ime set com.zunyun.zime/.ZImeService").communicate()
    #z.server.install()
    #serial = z.wx_action("opennearui")
    serial = '["v1_8f4d9f2749f790f71cec27d6a7c8577802dc163d0ec70784f9945117aa51d09383b7dea6f05ed349c634dbcf0669c1d5@stranger","v1_32fb4a920748d9565006a6b0b304cb9dcd8c470679bfce5364fd2be359ef16e2@stranger","v1_b506b80d683455e6e6992d219b718ed5b04423558213090a359fd6660a554de3f969bbba2641bff903361a9fab69de7e@stranger","v1_4668aad17c21775d98413d0b74b658ea484a838d8d7bc14a4281ce511edd618a8402a1f19ffac666d7fc412adfc49d2c@stranger","v1_54adc827284663d5e754b9e45e6162b4afe78cc13a75d3c5e1bd4967056f32523a1fb5aa7828b9aebc9e4af076df3e3e@stranger","v1_76bdf47ddf9f1919e4033d11e700aa6d9a8bb36f5e8c5fae1c72e3122062c91738286980c9b9e2175f658dfdfe74302b@stranger","v1_13a4a1dadb7b06c6b5529236f9b223aada1dc78f1ccd0f03048e7813b61278edb048add008afa515e05e3184125ecf7a@stranger","v1_80a65d96ac4ab8980cfb20156902cb279fd3f4adc05d7307ff6b946308fa77ee7aa20f76cb253d05d04c264e4cfc6076@stranger","v1_d94a387a72453331babd39848d6fd7f01d5843a66bc83116a26b6d0bb73199c99ada9a2147948953af0581f5ca297546@stranger","v1_925f68285390b368c095ef9e542624fa0d7989c3eaf6098c08da009a44408559@stranger","v1_eea096dbcfd6534734bee21a908de5047ae42c5940a5420f6f40d5d67c1beffed95673b9f5e0480ae120332b69900e84@stranger","v1_d1a2e231ab4f4cd92099074cf2383e642740476c9d92c1e870bbac145db493d9342a63f307bf9746a2b3f67699d7e4bd@stranger","v1_c17341a2058e7a0b36f77755254849b63d8ae265d344b57cb5ac2efaa8f90569@stranger","v1_3d962d04f98d4330648461efb634428362b789993c0fdc5cdf7425a9b536d9145f55005f34b6d311ab6792c15a922428@stranger","v1_117247e9a11a51bc02f0f1c90d1fe94278dff8a1715a7e383c0da8c191ff055c9ddf49d1c9d351f5928855a74cf8d77a@stranger","v1_efaa0597479564bf3b31435359228660351399a312ea8482c973db381883365c82829b404e12037cf861deb44cc78a62@stranger","v1_72a34e891074be46f7a859f33d4b22806dbac33e8cd0711d9afcb223f99234a111409dd66948017e8e3bf4bad639f094@stranger","v1_33b5bed92eff9384d71dacdeabce6cb712acb3e86fb5e582dc9ff6aeadab8b0823d50ed4293836360e83a505114d62d8@stranger","v1_8d66a8e669367b576938802c94e6e01e47b0054e18ae2bc632d33e27dc184104135ce8342bb50d00e70fd12f636158b2@stranger","v1_6d3f637af95635439f441a49336aa6fa54d93ffe2a440f17ac5919f59b894d09eb632d7b062ddf4049b620b89f3ad287@stranger","v1_3293fd7259d9c93fdd2e92e205fc25d3025f370a5b183c8db57f17ae9bed616767e17609678f5f17aabcff6655a2c8aa@stranger","v1_3f3917c0b51514c02c0762d6009786c6e75daf79a487a86b0ec9fbb74efff15194720226f6a0e58acb15d0ec223f15a5@stranger","v1_b9ebd2f0438c648753478cc0b805dd210f03f43a3973aa849fa7520bd3d847d9a5c8f1100a541cd6bf20e602389d83d2@stranger","v1_2f180a2183ebe5bc674bf8ba29b1deb415cfe399955a4eb2b37b383f07453daf9736e701c95479a44227af409a0fcf0f@stranger","v1_7591a694f553e9bb6c75da4565086e524755df7c375fae31d08007ef7af3b389059d3e3d8db85069dc3f7ec473e8e0a6@stranger","v1_f46255ceb886d10d470965efb33c35186b0b66f446da519cb67605f6bbfb29fea0c14a3d8143878998a95113a303511b@stranger","v1_f509df9cfe2e57ef0f1936b610a4e0367ff4c5f5737873e3231300100c025dabfcd4981d4c98b42e020983e01dc632f3@stranger","v1_6ed7f284d2a33f01c4df9d17927166e342c515341349ff2eebcdb96072bd32ce8eeab7b5951c625eaef2f9d2d91ddc32@stranger","v1_e8733b812c54a90926629a0ed162e779c67443c7ca09c5cba7ce224b8c5c9a56@stranger","v1_fae0fdde8cf72afb7ffa7f03e53ef085d9f69f88119906fef4e9c08d8c62e9fa13d0d0a72a049e8a9a7755c72e1ad925@stranger","v1_500f095023b84ee6443bf0568da68a869dd9a901777ebfcea8cd64d784680aff28ecc1172e8f80c709ef1ef206a921de@stranger","v1_efc61f49d9611d37dce35567c394e36b55699681e16559cfc5e422b73d417e0ddd008c9f46f73e57cec6e7d0795d7b11@stranger","v1_8b0d9ef621b2aea6e62852624ee19936038bbda17f27308d8b62364d8380ca319bf3cda67c98faabd9a23576f6da2380@stranger","v1_c3bc554fe1a0bd8cf6a1b541ba27ca641f1619b93d4ee07e90a15d79dfdbcc30db5657fdebe8a502c476d3f28cedd96e@stranger","v1_5cb86556cebdf67cf4d0d8460b933549da2637c5b0e252363e41c8e033c73af46ee111375c41522e0c9499d8396660ed@stranger","v1_146c50342cdb6d7cf705bdd53b3a68220ea95173fca11648d0ab35e4b41223b828e6048a895213c151e62ef7a63161d9@stranger","v1_4236ce7e411e052b8513a9b6ec29c4fe431fc459eb50a8f310ee13bcbddb5c2905628da8e8dbc63602f7af6bd565c375@stranger","v1_828605f2384b549054f38be2b962bbd9b41f426837551cf9e72cfc59e0930811be26cddd03f495fa768d07688a8f0bbf@stranger","v1_53896d5c25ba54ea31a00f8cf4bf1bf1f284eb02605317c1f37580805db2726e8f5c43705d83d3e17f5afc6c3fc04c20@stranger","v1_00a3c205d61505286dad526ab20b8dda40aa3ef8085faeed377401b92582befcd69a1d3dc9e21f8750d80ebc173b983d@stranger","v1_cf63f2581f0536d0ed4aa0f17fec2914529cc4b15f78b5c3e7caaab92421613f2706c6ce6605221afab0cb5a4bce3f4a@stranger","v1_f3eb99c9575485617a22be767d9bce2586b8f474a50047d7d03ce28ce563fb63cf5a8438640cf51c170a8cbfed544ab8@stranger","v1_f1b789b71c203d40fe4ae943e990d241d5a97fb85d607f76f3f8c62b507ffe8a6465489b06295229020bf20417eb97ec@stranger","v1_5b9720a0a31e625958173dd658d45b2e7e8abe29fa78d86b32c4d4925c1af4d6@stranger","v1_823a90c183be3cac35bfd6b1a156b7d1d7c93164f7df56ed2f43306a118da5f71496eea2e8619054f7e74ed571bf4e3c@stranger","v1_f2d8f32b6013e6827fe4169fe9990673dea84cf1827f72a4f62911524ce5a5a789fdc2499612f7c5b1415181c027da20@stranger","v1_d62852441994a344313ce7611d1e32a89abe8156c41e2fb2b9c475f121e4dcfb06d04bb922de490cdc85ea720fc6c90e@stranger","v1_aac6e86b1cc1e70d034e6a606cf88d6319141584063a1d863d11286c0b839467fe4608b8fb263bdc4ba4b3555f3ef96c@stranger","v1_3677eecd74e84ba0b8b6b1e4fa8af50d2fadb659ece145885657e3b14101ba2e5c05ae9fac9cc3c101226bd5ba7e6f17@stranger","v1_b7437dd49e89bd7b28366f59ec6ce13d649d7aea7ebfbd103b0c69df565e0bf00d061916eaf0708717dc01b78c3e673e@stranger","v1_e312a69032ec81bfb62fff5148cec9c50d6ac46037dce02d0ecdbda683fab62c6dba8984cd4efae472d09374e1ed5bd3@stranger","v1_a65fc92505a40e6f2178a5af1e64962f2d12c7e0f294c3d786ca531d592ee6b37531d3ed06032061027f3f9c427a2110@stranger","v1_3d71db83453a9ab2f767c9033d97c30c1f7d1ec0a964afc8edd6636caf84829b7b35be7b9a8fa1a06ad8a9d7683630ab@stranger","v1_f66c964ce3fe9b34de9e399449ec7c485d37bb3c78bcab87c803456e0b03431bd3fe3b8716b6d5fcdaae30463189e834@stranger","v1_47233417d175f9959c831e9ff046f16bc246bafaf7816f8163cd7b45eb1bfc866e5e12eb16a85c79ed4726cc0c303a52@stranger","v1_2db492e68edb4c758f1c32ed534fb2bbb6b7cd4d6fd5d2c3ededb304a356e65f@stranger","v1_08431d3bc2ed742797445789eebcf3a03012354cab9648bfc629c67bb16146eccec90506ebf346b63fc93d6d0e89c380@stranger","v1_77b36b2820742b24c9e2189bfd2e1f8ca70ce2a55f85a3af257c793f1b12f90d959dc664c7c343b2b2738371f6e816bf@stranger","v1_689da368aae06b1c43a95d7f6c588299a22e0cce5d814b716d66f415cbdc3a59e5de40b5ebca4c4942762cd17a622510@stranger","v1_1d3dfc162fa8fc2bdbf199786ec60c247f34d3ab37b5486ccd91f387317b91f8608db37c1577219e41d40594e8dac57d@stranger","v1_31e1b250c1e856194348236b3730a501199268205f855a09ea8f438fe4a9c17a1622827c154de7db1fecc3300c20d22e@stranger","v1_cb5d7c2b65f8c8b8f36b3e211c1bf57c6a6ca190f3dab3262ca0200558fa88e8b933fdb08f2b834fb6e62773c3db5d51@stranger","v1_749893068bef7d0612b23c8b10a3adafea2596839adff74b9c07bb9a77d8d83ad03981f31ef2e934a1af75af90b0ba0b@stranger","v1_3c6aa8d9dfc3df02c52b54e97120774b9555370cf68cf8aca14921e110ab4ba1ac164d9e617a31b334b51a722ca1293a@stranger","v1_df113169de9467575a3cfd783a93eb576795d45fba5aa2a511bd9d600fba23cdbe459b1217c873b9a8c706a99694ac53@stranger","v1_d8f21af440511de7d85718831f66fd437b84e4a450da7726afb42d5e2ea76dc2f8f936fd6c6e1bff49b8f5b21d2c2554@stranger","v1_1ca0630267cb1c5769e19ecc0f278b53f014fcf13f9e44ce0cb50b39f075357b2e1f3ab8c2f4d63419ba56b33687601f@stranger","v1_480ff04ee20490c5a4c5adcc5b675998168d4630bdb007462abb5c2961305d631ad694a3fdbd5ece3d1ab1611b1523b5@stranger","v1_345d844c746de48c741e6a44ca5d3dbc023c620494bd1f70e83c3810b7f4aea23092cbf28688d36c31eb8befaf4cb22f@stranger","v1_2305f1a2a3545d4832236d52c23ed16423b511b83a3b9b2bbb26bf0becf0796bb9fbc720d6980450567c92a4a9eb9d37@stranger","v1_b137705eee823481ce1e2612aabf4903127573f338514a45aa74f896b3edd61a137b81e1b3542f348ee6f46d272001f0@stranger","v1_df9ad7468dcda9ace4155945e868b58e8262c9b07c9228e618a4df325f9d2dcfe9c7d315b8828684d19881c6d74e4441@stranger","v1_e23df9c26695a243fb6da75acadd1033af00fd17f96acca14b2eb7d8bceb225fe7e11a60a863a19b2a4b2421a4ce028c@stranger","v1_6357ef386e59567dcba0761c071fb1e44fd4c93c3f62e658c59fc15a753b499246815219c08887b9e85b266e6485ca12@stranger","v1_18a6f7477507594893f6b5435935891ab3329bd830bffda97b2a0e69ba6b8733715e4c701f81bb2cf80d1f5999e4e926@stranger","v1_d0c719cbaa36b4299858a1bfa77056df5d10a3819d946e26abb18efe55b0c5dc5d1c23f4aace723e12d8b478d84d38e4@stranger","v1_8736c2705482126eef2ba31561173b022cdc0eabc71a2efd35dbf8f65824cce49a384edfda249fb571c028f6a99f6d60@stranger","v1_aa5a2f6484b7fd1f608691cf456c1323855e97b36ac581c4325b34fd298b69a9584340b8ff6a9526ae406dea36f8600f@stranger","v1_fbbd3deb97d4d4afec7210fc1caf8becb7690d17e75a8f6059a4dc48d49082ba09d6ffb0487ba17fc1a850c9aa460e5d@stranger","v1_00e07a09d439815fb859d83bb1b0575894369cf04baf3a75bf33db298c55b6b7@stranger","v1_eb353ab49c8129c43a11d906f4bdc54d945b32f2a956d208ff9a78bddda8dc6507027a0479fc1f9ca8e83dbe961a8505@stranger","v1_e0f0b82ef5046aed64e56cbcf23007c7e39566b83bdaec3388df82fa04484906140bd69ecbd20fd830365e3e2c598ce9@stranger","v1_a9f1fac92f59f28f1a523df4b5def74ecd83172e6c69f97ee2abf4a2c22c87609c8269b81850fdcc2ac7456031a8e2a5@stranger","v1_b5e4a0d2380e0963889502671a9ab16a481cd23487959e06be55d8580cc623be4d7e37916e1d0be1f52e82e01fa09595@stranger","v1_164c0c6ff261bbd85f18c0e8d25485dcdb3c2852f9b2921fd2ec529848778c4ae24fdb3fd2f3d61f1382caf68e1279a4@stranger","v1_f33cc03026280fda8eb7c8e03fbda8f88dff6fd0f8e7be00c482a9bb3b49ea86ef61705cf11fa119ff30a7e7ae40ccda@stranger","v1_f74848a2d8fd0607022311ecb3fdcc3465ff918c043d67acb9f9e7dfa22166cc0aef071578de8372595a2055bfec1a56@stranger","v1_77572c8d57dd0b1d34128ac475b419495f9272d92ed24d9720c64c04c9860398585220ad7b997a5238c4fed8c80a99b9@stranger","v1_998f1dc4d559ec3f78ab6e2787ac904a589f7e90e960c67c14e443272d86997b3cc834bf9d9014ef9e1e0d55ed5a4649@stranger","v1_78fbb4db0813d1c1d06892a71de25385ffda840625cce037963bf39734b5b06a6c5613af12429db583896ede95132c81@stranger","v1_516bbd3603b8eb2ea4ead86eff64ac74f67d8ada841e8d79a263fcd5cf925fd596d29790c561b920c1497bbfa8b1ad9a@stranger","v1_249e4bba3533c9f1cecd807b5a8ec33e5de77cd7c22d318bc31ae2a34f33ffef784b37c3afdc5181d9295e439248e6a2@stranger","v1_582123e2ee4097211fba9ab30f071ccb2b365d2bf644e5c35824dd2b80fd7af3b0922f66be76a9a2a8f2efa6d1c0c84d@stranger","v1_229dd4713e7637324b2a919c770b523c30aed9ca6b257dfbff251cd638c5bdbd9dbe5fba479c32d8329fca5f48107c13@stranger","v1_23fc9e130a27d04352a18fba10e05a23c728971164db417d4e4dd0cfe913d5da@stranger","v1_096134179b02c5e5957a5b1e301b64f894a9597fb6b0e4849a4384bc28e96f07a1e1ac92cbcf2d39bbeba26f7a975edc@stranger","v1_d151c5005d2048570e09c12854ae34139770b7ab02bb9d9c8c598137c4561d74594793ee9c40dc8bd919235e66fcb0d7@stranger","v1_4be9d59aa67a9d1a5001d61ea66157253a04e9159185d9ab3f15a663c9c57e52cbbaa8fddcf88813da5270f77bb157df@stranger","v1_c40e4168a2ac22f9c04d6da0968431ee3ef2234658ced1b1c30a028f7f6938013032058bde984f618b5528ba5043cc9d@stranger","v1_8254f85dc5356b3feedbed73596f7310db49f93b44b7c0e629237e5d1e6f95e3898603d651f707ef87802eb82b340dd2@stranger","v1_8505be8c8c8752a69f61b674fd6ce062cad43328a867f9d92493489abcbb2e0e0c4285de1088d71137d142a985aa1c4a@stranger","v1_024c791f44f888a77276747558a17fe918d63dddb22c543da0b885186daa271ae3c852f57faf961cac1166cdc0e89b1b@stranger","v1_024ecf29e4c266a0ce56fa63249f71a08fd2cdbe18e0d531d8583bc01e7733f3d989339f163559f2a77bb7955a4462f1@stranger","v1_86c0330b1051973ed66dfa71ef1b6ac7c148d59c0b2d69533616ced2f5287d1fc18dfb8557f33a07a53e61e32dbf45eb@stranger","v1_e83d54827cff7d36364916abe6c756d53dc50599fe21be9e082536db4156b0f5048adbd3dc982df44b0c7c5aa097d085@stranger","v1_3967adb58c3e8d2634ba0ef8375865e5b7f421298a69296ac991baa715a24b32ff93b5d1dbade4ee54145d695addba2b@stranger","v1_a3bb497f05ca284b3fc5ce95932e6ce45943402b2f763a1a655756c7795297191d0544fed0d3339e2889e69cb7e57a67@stranger","v1_c114230fc8146dc8837e53e9bf5e8ca4eb5e7c630b02cfd8edcbc287fb81b0dab1615227c3a7a7225c5076acd1e0c72c@stranger","v1_1939dffa7633b24d5f4b781e5869c384952176448402f927a9537f865fb38af43496ea9c70636501dd70c6af6e22e0ae@stranger","v1_c25b0d065fa493d28c6a2cc3b92a128a43d6ec12aafb1def88eab30b7e5a9ce027ca2d756873fa4d7927e03ec014130e@stranger","v1_db9773d27ca9f3cba9fd42529660315f2c12a2339dcafc4a4adedbf056b892dc1ba50a9d92a39de4591b45f12a9c2ccb@stranger","v1_43ff2d4f0fb35f886e345e8053831679f7ab5a46a18cc38431876f0d53b1d538b50854fb973cbcc5116121fefa2439eb@stranger","v1_d345e012a42c67f274c697416d0f81a31e4d42192a05ffc2ec165a31dc5a5c7bdbec0672a677c814bc0ef47eb0f9a924@stranger","v1_4f789326169335eaefec695adcc10dea27ca13c42e75f361fd47587fb233888a976074489c6bd8f8132cee951d94811b@stranger","v1_d88be55e6c0dcb03c45ed30273b4b478af4a115ff320f85f3f95580f0d9d4951905773340405d0d29142767dc4981384@stranger","v1_937545614c88801e50119e4a23de492ce7631eb9b82ed0be659260a5e71db0303293a32647982b4d6978dd287e67cd13@stranger","v1_8c5cf74c0bec9c248ff38739110e78e81334b163154ca03cf87028438e6b121f902d8af829d13ac5484b62bcd6fe65e6@stranger","v1_58316ce9c74ac52f4e87bec20a80a6a1a1bb15838a0d6508621b52981552163bb69ed83322671898f925fd9edcb64a70@stranger","v1_21c14f1afdbc62de18054a70aabbdd7e3ddfa72cb8a9a34a934e596fbd7ba4306b2a53e9c8005be097045b5885b51ae9@stranger","v1_be9b3c90adffc8942f78fbd83a330c9350f137019dbc866d5bdb7ae767b675a8baebb1500fc568da26d2f326bfa0c53b@stranger","v1_5c8a09703e46a76e59e2650d8cac0475848b37bce4b9f302a4d74600b3d73f752dcb21b8e423aa8fbb34887b1d8ba79c@stranger","v1_13ce64dafd1fcccee0c287340a46c1da3fdc363eb4bac4f72cd31814ae2880e0a438e1a3c92c0397d858d8014761ca49@stranger","v1_fe4272087903e6bbfb4688dfff636d7341d32d1cfc56e438080f266587b176ccc7b737c3edebc63562d0823255f06f5f@stranger","v1_6efe03fd7b964900e6f67b9349e317ca422f8e3a1e755e75dcc69b8c84c8f95c087f11f91ac243663c26e5285849386a@stranger","v1_89d39c986f4ec4b740a5134dbbe0153e4452eba9975f706a40f561c015894d3df650fc4cff1bd1b25c6c3dabf8b894c6@stranger","v1_c16cee4d88207bba263b44321cb8565ab2a55dd46f4b957149fbcd5adfdc85231ed5ba3cd8724b957f82a40d84787fbf@stranger","v1_bea4cd401f7aaddd239c6fd3338fa2f967663934a30cfa1a25f181938bf099c1153a1014d5bbdf2bd7d6a85088bd4ca7@stranger","v1_335298f6f597142a21fa08e8286553ead56ed8adcb69f232dba06194b2fab3c42450eb629b749ba5c30f29edf8d4fafb@stranger","v1_a50221ae2368b710cca9f145d8ad701d498a862f41ac2ddb08bb6e582ffabf3286b68df6822c6f0121e88f5c1e960235@stranger","v1_1de791d8f9e42b4ce2bdd83eb025aa5f058ca051400f8792727204d9aeff6c9cc63046a91a50bc439f6eaf8e98184ce5@stranger","v1_a107bd9daf8429a6ed3badd48ce1407a478698599fd9872dc269207bd01ad19675cb73950e052b772fc7f5ad30365b54@stranger","v1_265430e4671c24cac61e9c3515422a275f63dd2f5a75d29b22026003dd1457f9b92694aa3492e49fa51404b863ead7de@stranger","v1_011aecee36dcba213c3faf55704b89f8010d3cb7d816082c469b98f160eaa8af42be17c6cebe806ef6095e559d9e8c68@stranger","v1_e89f7902be5071cf0b01b4766f2741e46d3528c20aef4aff0b37214ab8cdf68db8e467d8e71d47fa44e205ebd66d60e0@stranger","v1_b3f58beeedac577c90ffbfbd4ee6ca8937e06262ee4441a30cf26aa82e8c6f382317c3319ef0aa293a3ce2b448704d2a@stranger","v1_a072dc653c20fa94b1b6c5aaed41b448f8ac40bb55a81baf97d73d457f01fbe7def7860c93915a44ed3e839ac827612e@stranger","v1_c85590f7f7a2057daad424c46dc0c3587d8165a3bca66035bdfa81a47655d9c4b4ef25c9c37d31f13ff1f960483ca452@stranger","v1_2a48a78748c73970ecdb817a7cdac8189398b972378f32de7000b0ebfc9f71eb7e33d807b5108a6a470580804730f5dc@stranger","v1_3f0e2972b7f39985bee55cafe5c5d76edba8e233be2fd1444e10cc96a62cb96f@stranger","v1_82058e9fad582996000fd3d4fef41e1dc4ef8d59a6fdebdee8c289690bd50d23acdab2e4af4dfd8d497ed5c5fbb847db@stranger","v1_c87923b3c024a2601d2d676ee4e8a19f68b2305cc1d2e430b7b2143a57ff6ad1e0c6c1bdcc35cf284ec86f3bfd45f1dc@stranger","v1_522bfe80de5d56f59c27aadd7e465d1155de7f0a5c6bd043375c8ac80cf6b8d2ab3bcdf88a252e419f76429ee713234e@stranger","v1_976a46188fccc10aa48c443a0e1774b97baa91ae7dfe1e723c750ad641d6b014d5568574d72310add1a7640b15b7ece8@stranger","v1_a34e5affbb6e6a90723d5f2ceb4de77a41f9b59752747a490d33d32681f1fe5f0f446ad7dc897069a2944eac20ffac2e@stranger","v1_f621139629f5e831edf0f88d0b162454b0b9f6d49819eb91abc728406703c8d0ecdf77b1fe9c9a4ad073addcb96b159b@stranger","v1_5201aacffe0f1921356e22ad150f5d5d2273e5c6799b26312fc32fd1d5697dab9d984630825fb0eefd7e048d70b5b21e@stranger","v1_b2e75a8853b1d1a30cbb6c4dba8c86c43c0a7685517a151f277581abb760d60aca2e9c16166c56c22ee9b21812713c6c@stranger","v1_2c58a18dcc7aa801c642bc4772ccc12c3df2bb219288f9953696af9ba322ebeade7a10f200f7e00702b004c36385397e@stranger","v1_2f8703d267f9af292a8dcf9fa4b28bb88256e45e35adb21b8e5188a9e18291a59b983f3b56fc03989e04bb9c191ca083@stranger"]'


    ids = json.loads(serial)
    for id in ids:
        z.wx_openuserchat(id)
        break
    #serial = z.generateSerial("788")
    #print jo
    # d.dump(compressed=False)
    args = {"repo_cate_id":"104",'number_count':'100',"time_delay":"3"}    #cate_id是仓库号，length是数量

    #o.action(d,z, args)
